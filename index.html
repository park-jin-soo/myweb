<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì±„ì›€ì´ ì˜ ì¤„ë°”ê¿ˆ(ì–´ë¯¸) ë³€í™˜ + í…ìŠ¤íŠ¸ í¸ì§‘ê¸°</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      padding: 20px;
      background: #f0f0f0;
      margin: 0;
    }
    h2 {
      margin-top: 0;
    }
    textarea {
      width: 100%;
      height: 150px;
      padding: 10px;
      font-size: 16px;
      margin-bottom: 10px;
      resize: vertical;
    }
    button {
      margin: 5px 5px 5px 0;
      padding: 10px 14px;
      font-size: 14px;
      cursor: pointer;
    }
    #main-app { display: none; }
    #editor {
      border: 1px solid #ccc;
      padding: 10px;
      background: #fff;
      min-height: 200px;
      margin-top: 10px;
      font-size: 16px;
    }
    .toolbar-container {
      position: sticky;
      top: 0;
      background-color: #e9e9e9;
      padding: 10px;
      z-index: 10;
      border-bottom: 1px solid #ccc;
    }
    .toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 5px;
      align-items: center;
    }
    select, input[type="color"] {
      padding: 5px;
      font-size: 14px;
    }
    .instruction-box {
      margin-top: 15px;
      margin-bottom: 25px;
      padding: 10px;
      background-color: #f9f9f9;
      border: 1px solid #ddd;
      border-radius: 5px;
      font-size: 15px;
    }
    @media (max-width: 600px) {
      button, select, input[type="color"] {
        font-size: 13px;
        padding: 8px;
      }
      textarea, #editor {
        font-size: 15px;
      }
    }
  </style>
</head>
<body>
  <h2>ğŸ§© ì±„ì›€ì´ ì˜ ì¤„ë°”ê¿ˆ(ì–´ë¯¸) ë³€í™˜ + í…ìŠ¤íŠ¸ í¸ì§‘ê¸°</h2>

  <div id="auth">
    <p>ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:</p>
    <input type="password" id="passwordInput" />
    <button onclick="checkPassword()">ì…ë ¥</button>
    <p id="authMsg" style="color:red;"></p>
  </div>

  <div id="main-app">
    <label>ğŸ“¥ ë‚´ ë¬¸ì„œ ì…ë ¥:</label>
    <textarea id="inputText" oninput="updateCharCount()"></textarea>
    <div>ë¬¸ììˆ˜: <span id="charCount">0</span></div>

    <label>ğŸ”¢ ì¤„ë°”ê¿ˆ ê¸€ì ìˆ˜:</label>
    <input type="number" id="charLimit" value="20" min="1" style="width: 70px;" />
    <br><br>

    <button onclick="paragraphBreakWithEnding()">âœ‚ï¸ ì¤„ë°”ê¿ˆ(ì–´ë¯¸) ë³€í™˜</button>
    <button onclick="clearAll()">ğŸ§¹ ì „ì²´ ì§€ìš°ê¸°</button>

    <!-- ğŸ”½ ì„¤ëª… ë°•ìŠ¤ ì¶”ê°€ -->
    <div class="instruction-box">
      <strong>âœ‚ï¸ ì¤„ë°”ê¿ˆ(ì–´ë¯¸)</strong><br>
      1. ì„¤ì •ëœ ê¸€ììˆ˜ë¡œ ë¬¸ì„œ ì¤„ ë ë¶€ë¶„ì— ì—”í„° (ì¤„ë°”ê¿ˆ ë³€í™˜ ì²˜ë¦¬)<br>
      2. íŠ¹ìˆ˜ë¬¸ì ".", "!", "?" ê°€ ìˆìœ¼ë©´ ì—”í„° 2ë²ˆ (ì–´ë¯¸ ë³€í™˜ ì²˜ë¦¬)
    </div>

    <h3>ğŸ–‹ï¸ í¸ì§‘ ë„êµ¬</h3>
    <div class="toolbar-container">
      <div class="toolbar">
        <button onclick="execCommand('bold')"><b>B</b></button>
        <button onclick="execCommand('italic')"><i>I</i></button>
        <button onclick="execCommand('underline')"><u>U</u></button>

        <select onchange="setFontSize(this.value)">
          <option value="">ê¸€ì í¬ê¸°</option>
          <option value="11px">11</option>
          <option value="13px">13</option>
          <option value="15px">15</option>
          <option value="16px">16</option>
          <option value="19px">19</option>
          <option value="24px">24</option>
          <option value="28px">28</option>
          <option value="30px">30</option>
          <option value="34px">34</option>
          <option value="38px">38</option>
        </select>

        <input type="color" id="colorPicker" />
        <button onclick="applyTextColor()">ìƒ‰ìƒ ì ìš©</button>
      </div>
    </div>

    <label>ğŸ“¤ ë³€í™˜ ë° í¸ì§‘ ê²°ê³¼:</label>
    <div id="editor" contenteditable="true"></div>
  </div>

  <script>
    function checkPassword() {
      const password = document.getElementById("passwordInput").value;
      if (password === "0101") {
        document.getElementById("auth").style.display = "none";
        document.getElementById("main-app").style.display = "block";
        document.execCommand('styleWithCSS', true);
      } else {
        document.getElementById("authMsg").textContent = "âŒ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.";
      }
    }

    function updateCharCount() {
      const text = document.getElementById("inputText").value;
      document.getElementById("charCount").textContent = text.length;
    }

    function getCharLimit() {
      const limit = parseInt(document.getElementById("charLimit").value, 10);
      return isNaN(limit) || limit <= 0 ? 20 : limit;
    }

    function paragraphBreakWithEnding() {
      const text = document.getElementById("inputText").value;
      const limit = getCharLimit();
      const chunks = text.match(new RegExp(`.{1,${limit}}`, "g")) || [];

      const result = chunks.map(chunk => {
        const trimmed = chunk.trim();
        return /[.!?]$/.test(trimmed) ? trimmed + "\n\n" : trimmed;
      }).join("\n");

      document.getElementById("editor").innerText = result;
    }

    function clearAll() {
      document.getElementById("inputText").value = "";
      document.getElementById("editor").innerHTML = "";
      updateCharCount();
    }

    function execCommand(command, value = null) {
      document.execCommand('styleWithCSS', true);
      document.execCommand(command, false, value);
    }

    function setFontSize(size) {
      const selection = window.getSelection();
      if (!selection.rangeCount) return;
      const span = document.createElement("span");
      span.style.fontSize = size;
      span.textContent = selection.toString() || "ê¸€ì";
      const range = selection.getRangeAt(0);
      range.deleteContents();
      range.insertNode(span);
    }

    function applyTextColor() {
      const color = document.getElementById('colorPicker').value;
      execCommand('foreColor', color);
    }
  </script>
</body>
</html>
