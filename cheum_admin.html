<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì±„ì›€ ìŠ¤ëŒ“ê³µ ê³ ê°ì¡°íšŒê¸°</title>
  <style>
    body { font-family: 'Noto Sans KR', sans-serif; max-width: 900px; margin: auto; padding: 20px; background: #f4f6f8; }
    h1 { text-align: center; color: #2b4e84; }
    .box, .admin-box { background: #fff; padding: 20px; margin-top: 20px; border-radius: 10px; box-shadow: 0 0 8px rgba(0,0,0,0.05); }
    input, button { padding: 10px; margin: 5px 0; width: 100%; box-sizing: border-box; }
    button { background-color: #2b4e84; color: white; font-weight: bold; border: none; cursor: pointer; }
    .result { margin-top: 15px; font-size: 16px; }
    .red { color: red; }
    .blue { color: blue; }
    .admin-only { display: none; }
    .row { display: flex; gap: 10px; flex-wrap: wrap; }
    .row > div { flex: 1; min-width: 150px; }
    table { width: 100%; margin-top: 10px; border-collapse: collapse; }
    th, td { padding: 8px; border: 1px solid #ccc; text-align: center; }
    .footer { text-align: center; margin-top: 30px; font-size: 18px; font-weight: bold; }
  </style>
</head>
<body>
<h1>ì±„ì›€ ìŠ¤ëŒ“ê³µ ê³ ê° ì¢…ë£Œì¼ ì¡°íšŒ</h1>

<div class="footer">ğŸ’³ í† ìŠ¤ë±…í¬ 1001 - 3085 - 3057 ë°•ì§„ìˆ˜ (20,000ì›)</div>

<div class="box">
  <h3>ğŸ‘¤ ê³ ê° ì „ìš© ì¡°íšŒ</h3>
  <input type="text" id="userSearch" placeholder="ì•„ì´ë”” ì…ë ¥">
  <button onclick="searchUser()">ì¡°íšŒí•˜ê¸°</button>
  <div id="searchResult" class="result"></div>
</div>

<div class="box">
  <h3>ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</h3>
  <input type="password" id="adminPass" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
  <button onclick="loginAdmin()">ë¡œê·¸ì¸</button>
</div>

<div id="adminPanel" class="admin-only admin-box">
  <h3>ğŸ“‹ ê´€ë¦¬ì ì „ìš©</h3>
  <div class="row">
    <div><input type="text" id="newId" placeholder="ì•„ì´ë”” ì…ë ¥"></div>
    <div><input type="date" id="startDate"></div>
    <div><input type="date" id="endDate"></div>
  </div>
  <button onclick="addUser()">â• ì•„ì´ë”” ì¶”ê°€/ìˆ˜ì •</button>
  <button onclick="saveToTxt()">ğŸ’¾ TXTë¡œ ì €ì¥</button>
  <div id="memberCount" class="result"></div>
  <table id="userTable">
    <thead><tr><th>ì•„ì´ë””</th><th>ì‹œì‘ì¼</th><th>ì¢…ë£Œì¼</th><th>ìˆ˜ì •/ì‚­ì œ</th></tr></thead>
    <tbody></tbody>
  </table>
</div>

<script>
const ADMIN_PASSWORD = "7702";
let users = {
  "meena77": {"start": "2025-05-01", "end": "2025-06-01"},
  "meena1225": {"start": "2025-05-01", "end": "2025-06-01"},
  "somsatag1225": {"start": "2025-05-01", "end": "2025-06-01"},
  "mark1536": {"start": "2025-05-01", "end": "2025-06-01"},
  "thebrightedu": {"start": "2025-05-01", "end": "2025-06-01"},
  "korea_b0509": {"start": "2025-05-01", "end": "2025-06-01"},
  "uyeong17": {"start": "2025-05-08", "end": "2025-06-08"},
  "yglajiasr632": {"start": "2025-05-08", "end": "2025-06-08"},
  "hellenjj": {"start": "2025-05-08", "end": "2025-06-08"},
  "s016653": {"start": "2025-05-08", "end": "2025-06-08"},
  "whiteyun8058": {"start": "2025-04-13", "end": "2025-05-16"},
  "whiteyun901": {"start": "2025-04-13", "end": "2025-05-16"},
  "jook2gg": {"start": "2025-04-15", "end": "2025-05-16"},
  "ussua": {"start": "2025-04-15", "end": "2025-05-16"},
  "chorog-": {"start": "2025-04-15", "end": "2025-05-16"},
  "aa--dd": {"start": "2025-05-15", "end": "2025-06-15"},
  "school999-": {"start": "2025-04-14", "end": "2025-05-16"},
  "hge319": {"start": "2025-04-23", "end": "2025-05-23"},
  "unk1472": {"start": "2025-04-23", "end": "2025-05-23"},
  "eg6404": {"start": "2025-04-23", "end": "2025-05-23"},
  "sado44": {"start": "2025-04-26", "end": "2025-05-26"},
  "na_english": {"start": "2025-04-27", "end": "2025-05-27"},
  "ymmath00": {"start": "2025-04-28", "end": "2025-05-28"},
  "epic_study": {"start": "2025-04-29", "end": "2025-05-29"},
  "aty0000": {"start": "2025-04-29", "end": "2025-05-29"}
};

function searchUser() {
  const id = document.getElementById("userSearch").value.trim();
  const box = document.getElementById("searchResult");
  if (!id) return box.innerHTML = "<span class='red'>ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>";
  const user = users[id];
  if (!user) return box.innerHTML = "<span class='red'>ë“±ë¡ë˜ì§€ ì•Šì€ ì•„ì´ë””ì…ë‹ˆë‹¤.</span>";
  const today = new Date();
  const end = new Date(user.end);
  const diff = Math.ceil((end - today) / (1000*60*60*24));
  let msg = `âœ… <b class='blue'>ì•„ì´ë””:</b> ${id}<br>ğŸ“… <b>ì‹œì‘ì¼:</b> ${user.start}<br>ğŸ“… <b>ì¢…ë£Œì¼:</b> ${user.end}<br>`;
  msg += diff > 0 ? `<span class='red'>â³ ì¢…ë£Œì¼ê¹Œì§€ ${diff}ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤.</span>` :
                    `<span class='red'>ğŸ”’ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì…ê¸ˆ í›„ ì¹´í†¡ ë§¨ì…˜ ì£¼ì„¸ìš”.</span>`;
  box.innerHTML = msg;
}

function loginAdmin() {
  const pw = document.getElementById("adminPass").value.trim();
  if (pw === ADMIN_PASSWORD) {
    document.getElementById("adminPanel").style.display = "block";
    loadTable();
  } else {
    alert("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
  }
}

function addUser() {
  const id = document.getElementById("newId").value.trim();
  const start = document.getElementById("startDate").value;
  const end = document.getElementById("endDate").value;
  if (!id || !start || !end) return alert("ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”.");
  users[id] = { start, end };
  loadTable();
}

function editUser(id) {
  document.getElementById("newId").value = id;
  document.getElementById("startDate").value = users[id].start;
  document.getElementById("endDate").value = users[id].end;
}

function deleteUser(id) {
  if (confirm(id + "ì„(ë¥¼) ì‚­ì œí• ê¹Œìš”?")) {
    delete users[id];
    loadTable();
  }
}

function loadTable() {
  const body = document.querySelector("#userTable tbody");
  body.innerHTML = "";
  const keys = Object.keys(users).sort();
  document.getElementById("memberCount").innerText = "ì´ íšŒì› ìˆ˜ : " + keys.length + " ëª…";
  keys.forEach(id => {
    const row = `<tr>
      <td>${id}</td>
      <td>${users[id].start}</td>
      <td>${users[id].end}</td>
      <td>
        <button onclick="editUser('${id}')">ìˆ˜ì •</button>
        <button onclick="deleteUser('${id}')">ì‚­ì œ</button>
      </td>
    </tr>`;
    body.innerHTML += row;
  });
}

function saveToTxt() {
  const keys = Object.keys(users);
  let text = "ì•„ì´ë””\tì‹œì‘ì¼\tì¢…ë£Œì¼\\n";
  keys.forEach(id => {
    text += `${id}\\t${users[id].start}\\t${users[id].end}\\n`;
  });
  const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  const today = new Date().toISOString().slice(0,10);
  a.href = url;
  a.download = "íšŒì›ëª©ë¡_" + today + ".txt";
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
}
</script>
</body>
</html>
