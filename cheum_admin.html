<!DOCTYPE html>
<html lang="ko">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>ì±„ì›€ ìŠ¤ëŒ“ê³µ ê³ ê°ì¡°íšŒê¸°</title>
Â  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
Â  <style>
Â  Â  * {
Â  Â  Â  box-sizing: border-box;
Â  Â  Â  margin: 0;
Â  Â  Â  padding: 0;
Â  Â  }
Â  Â Â 
Â  Â  body {Â 
Â  Â  Â  font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;Â 
Â  Â  Â  max-width: 1000px;Â 
Â  Â  Â  margin: 0 auto;Â 
Â  Â  Â  padding: 20px;Â 
Â  Â  Â  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
Â  Â  Â  min-height: 100vh;
Â  Â  Â  line-height: 1.6;
Â  Â  }
Â  Â Â 
Â  Â  h1 {Â 
Â  Â  Â  text-align: center;Â 
Â  Â  Â  color: white;
Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  font-size: 2.2em;
Â  Â  Â  text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
Â  Â  }
Â  Â Â 
Â  Â  .box, .admin-box {Â 
Â  Â  Â  background: rgba(255, 255, 255, 0.95);
Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  Â  padding: 25px;Â 
Â  Â  Â  margin-bottom: 25px;Â 
Â  Â  Â  border-radius: 15px;Â 
Â  Â  Â  box-shadow: 0 8px 32px rgba(0,0,0,0.1);
Â  Â  Â  border: 1px solid rgba(255, 255, 255, 0.2);
Â  Â  }
Â  Â Â 
Â  Â  h3 {
Â  Â  Â  color: #2c3e50;
Â  Â  Â  margin-bottom: 20px;
Â  Â  Â  font-size: 1.3em;
Â  Â  Â  display: flex;
Â  Â  Â  align-items: center;
Â  Â  Â  gap: 10px;
Â  Â  }
Â  Â Â 
Â  Â  input, button {Â 
Â  Â  Â  padding: 12px 16px;Â 
Â  Â  Â  margin: 8px 0;Â 
Â  Â  Â  width: 100%;Â 
Â  Â  Â  border: 2px solid #e1e8ed;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  font-size: 14px;
Â  Â  Â  font-family: inherit;
Â  Â  Â  transition: all 0.3s ease;
Â  Â  }
Â  Â Â 
Â  Â  input:focus {
Â  Â  Â  outline: none;
Â  Â  Â  border-color: #667eea;
Â  Â  Â  box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
Â  Â  }
Â  Â Â 
Â  Â  button {Â 
Â  Â  Â  background: linear-gradient(45deg, #667eea, #764ba2);
Â  Â  Â  color: white;Â 
Â  Â  Â  font-weight: 600;Â 
Â  Â  Â  border: none;Â 
Â  Â  Â  cursor: pointer;
Â  Â  Â  text-transform: none;
Â  Â  Â  transition: all 0.3s ease;
Â  Â  }
Â  Â Â 
Â  Â  button:hover {
Â  Â  Â  transform: translateY(-2px);
Â  Â  Â  box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
Â  Â  }
Â  Â Â 
Â  Â  button:active {
Â  Â  Â  transform: translateY(0);
Â  Â  }
Â  Â Â 
Â  Â  .result {Â 
Â  Â  Â  margin-top: 20px;Â 
Â  Â  Â  font-size: 16px;Â 
Â  Â  Â  padding: 15px;
Â  Â  Â  background: rgba(248, 249, 250, 0.8);
Â  Â  Â  border-radius: 8px;
Â  Â  Â  border-left: 4px solid #667eea;
Â  Â  }
Â  Â Â 
Â  Â  .red { color: #e74c3c; font-weight: 600; }
Â  Â  .blue { color: #3498db; font-weight: 600; }
Â  Â  .green { color: #27ae60; font-weight: 600; }
Â  Â Â 
Â  Â  .admin-only { display: none; }
Â  Â Â 
Â  Â  .row {Â 
Â  Â  Â  display: grid;Â 
Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
Â  Â  Â  gap: 15px;Â 
Â  Â  Â  margin-bottom: 15px;
Â  Â  }
Â  Â Â 
Â  Â  table {Â 
Â  Â  Â  width: 100%;Â 
Â  Â  Â  margin-top: 20px;Â 
Â  Â  Â  border-collapse: collapse;
Â  Â  Â  background: white;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  overflow: hidden;
Â  Â  Â  box-shadow: 0 2px 8px rgba(0,0,0,0.1);
Â  Â  }
Â  Â Â 
Â  Â  th, td {Â 
Â  Â  Â  padding: 12px 8px;Â 
Â  Â  Â  border-bottom: 1px solid #e1e8ed;Â 
Â  Â  Â  text-align: center;
Â  Â  Â  font-size: 14px;
Â  Â  }
Â  Â Â 
Â  Â  th {
Â  Â  Â  background: linear-gradient(45deg, #667eea, #764ba2);
Â  Â  Â  color: white;
Â  Â  Â  font-weight: 600;
Â  Â  Â  text-transform: uppercase;
Â  Â  Â  letter-spacing: 0.5px;
Â  Â  }
Â  Â Â 
Â  Â  tr:hover {
Â  Â  Â  background-color: rgba(102, 126, 234, 0.05);
Â  Â  }
Â  Â Â 
Â  Â  .footer {Â 
Â  Â  Â  text-align: center;Â 
Â  Â  Â  margin: 30px 0;Â 
Â  Â  Â  font-size: 18px;Â 
Â  Â  Â  font-weight: bold;
Â  _Â  Â  Â  color: white;
Â  Â  Â  background: rgba(255, 255, 255, 0.1);
Â  Â  Â  padding: 15px;
Â  Â  Â  border-radius: 10px;
Â  Â  Â  backdrop-filter: blur(10px);
Â  Â  }
Â  Â Â 
Â  Â  .alert-section {Â 
Â  Â  Â  background: linear-gradient(135deg, #fff3cd, #ffeaa7);
Â  Â  Â  border: 2px solid #fdcb6e;Â 
Â  Â  Â  border-radius: 12px;Â 
Â  Â  Â  padding: 20px;Â 
Â  Â  Â  margin-bottom: 25px;
Â  Â  }
Â  Â Â 
Â  Â  .alert-buttons {Â 
Â  Â  Â  display: grid;Â 
Â  Â  Â  grid-template-columns: 1fr 1fr;
Â  Â  Â  gap: 15px;Â 
Â  Â  Â  margin: 15px 0;Â 
Â  Â  }
Â  Â Â 
Â  Â  .alert-buttons button {Â 
Â  Â  Â  background: linear-gradient(45deg, #e17055, #d63031);
Â  Â  Â  font-weight: 600;
Â  Â  }
Â  Â Â 
Â  Â  .alert-buttons button:hover {Â 
Â  Â  Â  background: linear-gradient(45deg, #d63031, #c0392b);
Â  Â  }
Â  Â Â 
Â  Â  .alert-result {Â 
Â  Â  Â  margin-top: 20px;Â 
Â  Â  Â  padding: 15px;Â 
Â  Â  Â  background: rgba(255, 255, 255, 0.9);
Â  Â  Â  border-radius: 8px;Â 
Â  Â  Â  border: 1px solid #ddd;Â 
Â  Â  Â  max-height: 400px;Â 
Â  Â  Â  overflow-y: auto;
Â  Â  }
Â  Â Â 
Â  Â  .urgent {Â 
Â  Â  Â  background: linear-gradient(135deg, #fab1a0, #e17055);
Â  Â  Â  color: white;Â 
Â  Â  Â  padding: 10px 15px;Â 
Â  Â  Â  border-radius: 8px;Â 
Â  Â  Â  margin: 8px 0;
Â  Â  Â  font-weight: 500;
Â  Â  }
Â  Â Â 
Â  Â  .warning {Â 
Â  Â  Â  background: linear-gradient(135deg, #fdcb6e, #e17055);
Â  Â  Â  color: white;Â 
Â  Â  Â  padding: 10px 15px;Â 
Â  Â  Â  border-radius: 8px;Â 
Â  Â  Â  margin: 8px 0;
Â  Â  Â  font-weight: 500;
Â  Â  }
Â  Â Â 
Â  Â  .copy-btn {Â 
Â  Â  Â  background: linear-gradient(45deg, #00b894, #00a085);
Â  Â  Â  color: white;Â 
Â  Â  Â  border: none;Â 
Â  Â  Â  padding: 8px 12px;Â 
Â  Â  Â  border-radius: 6px;Â 
Â  Â  Â  cursor: pointer;Â 
Â  Â  Â  font-size: 12px;Â 
Â  Â  Â  margin-left: 10px;
Â  Â  Â  font-weight: 500;
Â  Â  }
Â  Â Â 
Â  Â  .copy-btn:hover {Â 
Â  Â  Â  background: linear-gradient(45deg, #00a085, #008f7a);
Â  Â  }
Â  Â Â 
Â  Â  .message-box {Â 
Â  Â  Â  background: rgba(248, 249, 250, 0.9);
Â  Â  Â  border: 2px solid #e1e8ed;Â 
Â  Â  Â  padding: 15px;Â 
Â  Â  Â  margin: 15px 0;Â 
Â  Â  Â  border-radius: 8px;Â 
Â  Â  Â  font-family: 'Courier New', monospace;Â 
Â  Â  Â  white-space: pre-wrap;
Â  Â  Â  position: relative;
Â  Â  }
Â  Â Â 
Â  Â  .backup-section {Â 
Â  Â  Â  margin-top: 25px;Â 
Â  Â  Â  padding-top: 25px;Â 
Â  Â  Â  border-top: 3px solid rgba(102, 126, 234, 0.2);
Â  Â  }
Â  Â Â 
Â  Â  .backup-buttons {Â 
Â  Â  Â  display: grid;Â 
Â  Â  Â  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
Â  Â  Â  gap: 15px;Â 
Â  Â  Â  margin-top: 15px;Â 
Â  Â  }
Â  Â Â 
Â  Â  .status-msg {Â 
Â  Â  Â  margin-top: 15px;Â 
Â  Â  Â  padding: 12px;Â 
Â  Â  Â  border-radius: 8px;
Â  Â  Â  font-size: 14px;
Â  Â  }
Â  Â Â 
Â  Â  .success {Â 
Â  Â  Â  background: linear-gradient(135deg, #d1f2eb, #a3e4d7);
Â  Â  Â  color: #0c5460;Â 
Â  Â  Â  border-left: 4px solid #17a2b8;
Â  Â  }
Â  Â Â 
Â  Â  .table-actions button {
Â  Â  Â  width: auto;
Â  Â  Â  padding: 6px 12px;
Â  Â  Â  margin: 2px;
Â  Â  Â  font-size: 12px;
Â  Â  Â  min-width: 60px;
Â  Â  }
Â  Â Â 
Â  Â  .edit-btn {
Â  Â  Â  background: linear-gradient(45deg, #74b9ff, #0984e3) !important;
Â  Â  }
Â  Â Â 
Â  Â  .delete-btn {
Â  Â  Â  background: linear-gradient(45deg, #fd79a8, #e84393) !important;
Â  Â  }
Â  Â Â 
Â  Â  .save-status {
Â  Â  Â  position: fixed;
Â  Â  Â  top: 20px;
Â  Â  Â  right: 20px;
Â  Â  Â  background: rgba(39, 174, 96, 0.9);
Â  Â  Â  color: white;
Â  Â  Â  padding: 10px 15px;
Â  Â  Â  border-radius: 8px;
Â  Â  Â  font-size: 14px;
Â  Â  Â  z-index: 1000;
Â  Â  Â  opacity: 0;
Â  Â  Â  transition: opacity 0.3s ease;
Â  Â  }
Â  Â Â 
Â  Â  .save-status.show {
Â  Â  Â  opacity: 1;
Â  Â  }
Â  Â Â 
Â  Â  @media (max-width: 768px) {
Â  Â  Â  body {
Â  Â  Â  Â  padding: 15px;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .row {
Â  Â  Â  Â  grid-template-columns: 1fr;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .alert-buttons {
Â  Â  Â  Â  grid-template-columns: 1fr;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  .backup-buttons {
Â  Â  Â  Â  grid-template-columns: 1fr;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  table {
Â  Â  Â  Â  font-size: 12px;
Â  Â  Â  }
Â  Â  Â Â 
Â  Â  Â  th, td {
Â  Â  Â  Â  padding: 8px 4px;
Â  Â  Â  }
Â  Â  }
Â  </style>
</head>
<body>
<h1>ğŸ“ ì±„ì›€ ìŠ¤ëŒ“ê³µ ê³ ê° ì¢…ë£Œì¼ ì¡°íšŒ</h1>

<div class="footer">ğŸ’³ í† ìŠ¤ë±…í¬ 1001 - 3085 - 3057 ë°•ì§„ìˆ˜ (20,000ì›)</div>

<div class="save-status" id="saveStatus">ğŸ’¾ ë©”ëª¨ë¦¬ ì €ì¥ë¨</div>

<div class="box">
Â  <h3>ğŸ‘¤ ê³ ê° ì „ìš© ì¡°íšŒ</h3>
Â  <input type="text" id="userSearch" placeholder="ì•„ì´ë””ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
Â  <button onclick="searchUser()">ğŸ” ì¡°íšŒí•˜ê¸°</button>
Â  <div id="searchResult" class="result"></div>
</div>

<div class="box">
Â  <h3>ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</h3>
Â  <input type="password" id="adminPass" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
Â  <button onclick="loginAdmin()">ğŸš€ ë¡œê·¸ì¸</button>
</div>

<div id="adminPanel" class="admin-only admin-box">
Â  <h3>ğŸ“‹ ê´€ë¦¬ì ì „ìš© íŒ¨ë„</h3>
Â Â 
Â  <div class="alert-section">
Â  Â  <h4>ğŸš¨ ì¢…ë£Œ ì„ë°• ì•Œë¦¼ ì‹œìŠ¤í…œ</h4>
Â  Â  <div class="alert-buttons">
Â  Â  Â  <button onclick="checkExpiringUsers()">ğŸ“… ì˜¤ëŠ˜ ìƒí™© í™•ì¸</button>
Â  Â  Â  <button onclick="generateKakaoMessages()">ğŸ’¬ ì¹´í†¡ ë©”ì‹œì§€ ìƒì„±</button>
Â  Â  </div>
Â  Â  <div id="alertResult" class="alert-result"></div>
Â  </div>
Â Â 
Â  <h4>â• íšŒì› ì¶”ê°€/ìˆ˜ì •</h4>
Â  <div class="row">
Â  Â  <div><input type="text" id="newId" placeholder="ì•„ì´ë”” ì…ë ¥"></div>
Â  Â  <div><input type="date" id="startDate"></div>
Â  Â  <div><input type="date" id="endDate"></div>
Â  </div>
Â  <button onclick="addUser()">ğŸ’¾ ì•„ì´ë”” ì¶”ê°€/ìˆ˜ì •</button>
Â Â 
Â  <div class="row" style="margin-top: 20px;">
Â  Â  <button onclick="saveToTxt()">ğŸ“„ TXTë¡œ ë‚´ë³´ë‚´ê¸°</button>
Â  Â  <button onclick="manualSave()" style="background: linear-gradient(45deg, #27ae60, #2ecc71);">ğŸ’¾ ìˆ˜ë™ ì €ì¥</button>
Â  </div>
Â Â 
Â  <div id="memberCount" class="result"></div>
Â  <div id="statusMessage"></div>
Â Â 
Â  <div class="backup-section">
Â  Â  <h4>ğŸ”„ ë°ì´í„° ë°±ì—… ë° ë³µì›</h4>
Â  Â  <div class="backup-buttons">
Â  Â  Â  <button onclick="backupData()">ğŸ“¤ ë°ì´í„° ë°±ì—…</button>
Â  Â  Â  <button onclick="document.getElementById('fileInput').click()">ğŸ“¥ ë°ì´í„° ë³µì›</button>
Â  Â  Â  <button onclick="resetToDefault()">ğŸ”„ ì´ˆê¸°í™”</button>
Â  Â  </div>
Â  Â  <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="restoreData(this)">
Â  Â  <div class="status-msg" style="background: rgba(255, 193, 7, 0.1); color: #856404; border-left: 4px solid #ffc107;">
Â  Â  Â  âš ï¸ <strong>ì¤‘ìš” ì•Œë¦¼:</strong> ì´ ì‹œìŠ¤í…œì€ ë©”ëª¨ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤.<br>
Â  Â  Â  ğŸ“Œ ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë‹«ìœ¼ë©´ ëª¨ë“  ë³€ê²½ì‚¬í•­ì´ ì‚¬ë¼ì§‘ë‹ˆë‹¤.<br>
Â  Â  Â  ğŸ’¾ ì¤‘ìš”í•œ ë°ì´í„°ëŠ” ë°˜ë“œì‹œ <strong>"ë°ì´í„° ë°±ì—…"</strong> ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ë¡œ ì €ì¥í•˜ì„¸ìš”!
Â  Â  </div>
Â  </div>
Â Â 
Â  <h4 style="margin-top: 30px;">ğŸ“Š ì „ì²´ íšŒì› ëª©ë¡</h4>
Â  <table id="userTable">
Â  Â  <thead>
Â  Â  Â  <tr>
Â  Â  Â  Â  <th>ì•„ì´ë””</th>
Â  Â  Â  Â  <th>ì‹œì‘ì¼</th>
Â  Â  Â  Â  <th>ì¢…ë£Œì¼</th>
Â  Â  Â  Â  <th>ìƒíƒœ</th>
Â  Â  Â  Â  <th>ê´€ë¦¬</th>
Â  Â  Â  </tr>
Â  Â  </thead>
Â  Â  <tbody></tbody>
Â  </table>
</div>

<script>
const ADMIN_PASSWORD = "7702";

const defaultUsers = {
    "epic_study": { "start": "2025-06-30", "end": "2025-07-30" },
    "hellenjj": { "start": "2025-06-08", "end": "2025-07-08" },
    "hge319": { "start": "2025-06-01", "end": "2025-07-01" },
    "kim1160gagle": { "start": "2025-05-23", "end": "2025-06-23" },
    "mark1536": { "start": "2025-07-01", "end": "2025-08-01" },
    "meena1225": { "start": "2025-07-01", "end": "2025-08-01" },
    "meena77": { "start": "2025-07-01", "end": "2025-08-01" },
    "na_english": { "start": "2025-06-30", "end": "2025-07-30" },
    "somsatag1225": { "start": "2025-07-01", "end": "2025-08-01" },
    "thebrightedu": { "start": "2025-06-08", "end": "2025-07-08" },
    "ussua": { "start": "2025-06-20", "end": "2025-07-21" },
    "whiteyun8058": { "start": "2025-05-18", "end": "2025-06-18" },
    "whiteyun901": { "start": "2025-05-18", "end": "2025-06-18" },
    "ymmath00": { "start": "2025-06-28", "end": "2025-07-28" },
    "uyeong17": { "start": "2025-06-25", "end": "2025-07-25" },
    "yglajiasr632": { "start": "2025-06-25", "end": "2025-07-25" },
    "eg6404": { "start": "2025-07-02", "end": "2025-10-02" },
    "yoong_aa33": { "start": "2025-07-02", "end": "2025-08-02" }
};

let users = {};
let isLoggedIn = false;
let hasUnsavedChanges = false;

// í˜ì´ì§€ ë¡œë”© ì‹œ ì´ˆê¸°í™”
document.addEventListener('DOMContentLoaded', function() {
Â  Â  initializeApp();
Â  Â Â 
Â  Â  // í˜ì´ì§€ ì¢…ë£Œ ì‹œ ê²½ê³ 
Â  Â  window.addEventListener('beforeunload', function(e) {
Â  Â  Â  Â  if (hasUnsavedChanges && isLoggedIn) {
Â  Â  Â  Â  Â  Â  e.preventDefault();
Â  Â  Â  Â  Â  Â  e.returnValue = 'ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­ì´ ìˆìŠµë‹ˆë‹¤. ì •ë§ ë‚˜ê°€ì‹œê² ìŠµë‹ˆê¹Œ?';
Â  Â  Â  Â  Â  Â  return e.returnValue;
Â  Â  Â  Â  }
Â  Â  });
});

function initializeApp() {
Â  Â  console.log('ì•± ì´ˆê¸°í™” ì¤‘...');
Â  Â  loadUsersFromMemory();
Â  Â  console.log('ë¡œë“œëœ ì‚¬ìš©ì ìˆ˜:', Object.keys(users).length);
}

function loadUsersFromMemory() {
Â  Â  try {
Â  Â  Â  Â  // localStorage ëŒ€ì‹  ì´ˆê¸° ë°ì´í„° ì‚¬ìš©
Â  Â  Â  Â  users = JSON.parse(JSON.stringify(defaultUsers));
Â  Â  Â  Â  console.log('ì´ˆê¸° ë°ì´í„°ë¡œ ì„¤ì •ë¨ (ë©”ëª¨ë¦¬ ê¸°ë°˜)');
Â  Â  Â  Â  hasUnsavedChanges = false;
Â  Â  } catch (error) {
Â  Â  Â  Â  console.error('ë°ì´í„° ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
        users = {};
Â  Â  }
}

function saveUsersToMemory(silent = false) {
Â  Â  try {
Â  Â  Â  Â  // ë©”ëª¨ë¦¬ì—ì„œëŠ” ì´ë¯¸ ì €ì¥ëœ ìƒíƒœì´ë¯€ë¡œ ìƒíƒœë§Œ ì—…ë°ì´íŠ¸
Â  Â  Â  Â  hasUnsavedChanges = false;
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (!silent) {
Â  Â  Â  Â  Â  Â  showSaveStatus();
Â  Â  Â  Â  }
Â  Â  Â  Â Â 
Â  Â  Â  Â  console.log('ë°ì´í„° ë©”ëª¨ë¦¬ ì €ì¥ ì™„ë£Œ, íšŒì› ìˆ˜:', Object.keys(users).length);
Â  Â  Â  Â  return true;
Â  Â  } catch (error) {
Â  Â  Â  Â  console.error('ì €ì¥ ì‹¤íŒ¨:', error);
Â  Â  Â  Â  alert('ë°ì´í„° ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
Â  Â  Â  Â  return false;
Â  Â  }
}

function showSaveStatus() {
Â  Â  const status = document.getElementById('saveStatus');
Â  Â  status.textContent = 'âœ… ë©”ëª¨ë¦¬ì— ì €ì¥ë¨';
Â  Â  status.classList.add('show');
Â  Â  setTimeout(() => {
Â  Â  Â  Â  status.classList.remove('show');
Â  Â  }, 2000);
}

function getDateStatus(endDate) {
Â  Â  const today = new Date();
Â  Â  const end = new Date(endDate);
Â  Â  today.setHours(0, 0, 0, 0);
    end.setHours(0, 0, 0, 0);
Â  Â  const diff = Math.ceil((end - today) / (1000*60*60*24));
Â  Â Â 
Â  Â  if (diff > 7) return { text: 'âœ… ì§„í–‰ì¤‘', class: 'green' };
Â  Â  if (diff >= 0) return { text: `âš ï¸ ${diff}ì¼ ë‚¨ìŒ`, class: 'red' };
Â  Â  return { text: 'âŒ ì¢…ë£Œë¨', class: 'red' };
}

function searchUser() {
Â  Â  const id = document.getElementById("userSearch").value.trim();
Â  Â  const box = document.getElementById("searchResult");
Â  Â Â 
Â  Â  if (!id) {
Â  Â  Â  Â  box.innerHTML = '<span class="red">âŒ ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>';
Â  Â  Â  Â  return;
Â  Â  }
Â  Â Â 
Â  Â  const user = users[id];
Â  Â  if (!user) {
Â  Â  Â  Â  box.innerHTML = '<span class="red">âŒ ë“±ë¡ë˜ì§€ ì•Šì€ ì•„ì´ë””ì…ë‹ˆë‹¤.</span>';
Â  Â  Â  Â  return;
Â  Â  }
Â  Â Â 
Â  Â  const status = getDateStatus(user.end);
Â  Â  const today = new Date();
Â  Â  const end = new Date(user.end);
    today.setHours(0, 0, 0, 0);
    end.setHours(0, 0, 0, 0);
Â  Â  const diff = Math.ceil((end - today) / (1000 * 60 * 60 * 24));
Â  Â Â 
Â  Â  let msg = `
Â  Â  Â  Â  <div style="background: white; padding: 15px; border-radius: 8px; border-left: 4px solid #3498db;">
Â  Â  Â  Â  Â  Â  <h4 style="color: #2c3e50; margin-bottom: 10px;">ğŸ¯ ì¡°íšŒ ê²°ê³¼</h4>
Â  Â  Â  Â  Â  Â  <p><strong>ğŸ†” ì•„ì´ë””:</strong> <span class="blue">${id}</span></p>
Â  Â  Â  Â  Â  Â  <p><strong>ğŸ—“ï¸ ì‹œì‘ì¼:</strong> ${user.start}</p>
Â  Â  Â  Â  Â  Â  <p><strong>ğŸ“… ì¢…ë£Œì¼:</strong> ${user.end}</p>
Â  Â  Â  Â  Â  Â  <p><strong>ğŸ“Š ìƒíƒœ:</strong> <span class="${status.class}">${status.text}</span></p>
Â  Â  `;
Â  Â Â 
Â  Â  if (diff >= 0) {
Â  Â  Â  Â  msg += `<p><strong>â° ë‚¨ì€ ê¸°ê°„:</strong> <span class="red">${diff}ì¼</span></p>`;
Â  Â  } else {
Â  Â  Â  Â  msg += '<p class="red"><strong>ğŸ”’ ì´ìš© ê¸°ê°„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê²°ì œ í›„ ì¹´í†¡ ë©˜ì…˜ ì£¼ì„¸ìš”!</strong></p>';
Â  Â  }
Â  Â Â 
Â  Â  msg += '</div>';
Â  Â  box.innerHTML = msg;
}

function loginAdmin() {
Â  Â  const pw = document.getElementById("adminPass").value.trim();
Â  Â  if (pw === ADMIN_PASSWORD) {
Â  Â  Â  Â  document.getElementById("adminPanel").style.display = "block";
Â  Â  Â  Â  isLoggedIn = true;
Â  Â  Â  Â  loadTable();
Â  Â  Â  Â  alert("ğŸ‰ ê´€ë¦¬ì ë¡œê·¸ì¸ ì„±ê³µ!");
Â  Â  Â  Â  document.getElementById("adminPass").value = "";
Â  Â  } else {
Â  Â  Â  Â  alert("âŒ ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
Â  Â  }
}

function loadTable() {
Â  Â  const body = document.querySelector("#userTable tbody");
Â  Â  body.innerHTML = "";
Â  Â Â 
Â  Â  const keys = Object.keys(users).sort();
Â  Â  document.getElementById("memberCount").innerHTML = `
Â  Â  Â  Â  <div style="text-align: center; font-size: 18px;">
Â  Â  Â  Â  Â  Â  <strong>ğŸ‘¥ ì´ íšŒì› ìˆ˜: <span class="blue">${keys.length}ëª…</span></strong>
Â  Â  Â  Â  </div>
Â  Â  `;
Â  Â Â 
Â  Â  keys.forEach(function(id) {
Â  Â  Â  Â  const status = getDateStatus(users[id].end);
Â  Â  Â  Â  const row = document.createElement('tr');
Â  Â  Â  Â  row.innerHTML = `
Â  Â  Â  Â  Â  Â  <td><strong>${id}</strong></td>
Â  Â  Â  Â  Â  Â  <td>${users[id].start}</td>
Â  Â  Â  Â  Â  Â  <td>${users[id].end}</td>
Â  Â  Â  Â  Â  Â  <td><span class="${status.class}">${status.text}</span></td>
Â  Â  Â  Â  Â  Â  <td class="table-actions">
Â  Â  Â  Â  Â  Â  Â  Â  <button class="edit-btn" onclick="editUser('${id}')">âœï¸ ìˆ˜ì •</button>
Â  Â  Â  Â  Â  Â  Â  Â  <button class="delete-btn" onclick="deleteUser('${id}')">ğŸ—‘ï¸ ì‚­ì œ</button>
Â  Â  Â  Â  Â  Â  </td>
Â  Â  Â  Â  `;
Â  Â  Â  Â  body.appendChild(row);
Â  Â  });
}

function addUser() {
Â  Â  const id = document.getElementById("newId").value.trim();
Â  Â  const start = document.getElementById("startDate").value;
Â  Â  const end = document.getElementById("endDate").value;
Â  Â Â 
Â  Â  if (!id || !start || !end) {
Â  Â  Â  Â  alert("âŒ ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”.");
Â  Â  Â  Â  return;
Â  Â  }
Â  Â Â 
Â  Â  if (new Date(start) > new Date(end)) {
Â  Â  Â  Â  alert("âŒ ì‹œì‘ì¼ì´ ì¢…ë£Œì¼ë³´ë‹¤ ëŠ¦ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
Â  Â  Â  Â  return;
Â  Â  }
Â  Â Â 
Â  Â  const isEdit = !!users[id];
Â  Â  users[id] = { start: start, end: end };
Â  Â  hasUnsavedChanges = true;
Â  Â Â 
Â  Â  const saved = saveUsersToMemory();
Â  Â  if (saved) {
Â  Â  Â  Â  loadTable();
Â  Â  Â  Â  document.getElementById("newId").value = "";
Â  Â  Â  Â  document.getElementById("startDate").value = "";
Â  Â  Â  Â  document.getElementById("endDate").value = "";
Â  Â  Â  Â Â 
Â  Â  Â  Â  const message = isEdit ? `âœ… ${id} ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.` : `âœ… ${id}ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.`;
Â  Â  Â  Â  alert(message);
Â  Â  }
}

function editUser(id) {
Â  Â  document.getElementById("newId").value = id;
Â  Â  document.getElementById("startDate").value = users[id].start;
Â  Â  document.getElementById("endDate").value = users[id].end;
Â  Â Â 
Â  Â  document.getElementById("newId").scrollIntoView({ behavior: 'smooth', block: 'center' });
Â  Â  setTimeout(() => {
Â  Â  Â  Â  document.getElementById("newId").focus();
Â  Â  }, 500);
}

function deleteUser(id) {
Â  Â  if (confirm(`â“ "${id}"ì„(ë¥¼) ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
Â  Â  Â  Â  delete users[id];
Â  Â  Â  Â  hasUnsavedChanges = true;
Â  Â  Â  Â  const saved = saveUsersToMemory();
Â  Â  Â  Â  if (saved) {
Â  Â  Â  Â  Â  Â  loadTable();
Â  Â  Â  Â  Â  Â  alert(`âœ… ${id}ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.`);
Â  Â  Â  Â  }
Â  Â  }
}

function checkExpiringUsers() {
Â  Â  const today = new Date();
    today.setHours(0,0,0,0);
Â  Â Â 
Â  Â  const expiresToday = [], expiresTomorrow = [], expired = [], expiringSoon = [];
Â  Â Â 
Â  Â  Object.keys(users).forEach(id => {
Â  Â  Â  Â  const endDate = new Date(users[id].end);
        endDate.setHours(0,0,0,0);
Â  Â  Â  Â  const diffDays = Math.ceil((endDate - today) / (1000*60*60*24));
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (diffDays === 0) expiresToday.push({id, ...users[id]});
Â  Â  Â  Â  else if (diffDays === 1) expiresTomorrow.push({id, ...users[id]});
Â  Â  Â  Â  else if (diffDays < 0) expired.push({id, ...users[id], daysPassed: Math.abs(diffDays)});
Â  Â  Â  Â  else if (diffDays <= 7) expiringSoon.push({id, ...users[id], diffDays});
Â  Â  });
Â  Â Â 
Â  Â  let html = `<h5>ğŸ“Š ${today.toLocaleDateString('ko-KR')} ì•Œë¦¼ í˜„í™©</h5>`;
Â  Â Â 
Â  Â  if (expiresToday.length > 0) {
Â  Â  Â  Â  html += `<div class="urgent"><strong>ğŸ”´ ì˜¤ëŠ˜ ì¢…ë£Œ (${expiresToday.length}ëª…)</strong><br>${expiresToday.map(u => '@'+u.id).join(' ')}</div>`;
Â  Â  }
Â  Â Â 
Â  Â  if (expiresTomorrow.length > 0) {
Â  Â  Â  Â  html += `<div class="urgent"><strong>âš ï¸ ë‚´ì¼ ì¢…ë£Œ (${expiresTomorrow.length}ëª…)</strong><br>${expiresTomorrow.map(u => '@'+u.id).join(' ')}</div>`;
Â  Â  }
Â  Â Â 
Â  Â  if (expiringSoon.length > 0) {
Â  Â  Â  Â  html += `<div class="warning"><strong>ğŸ“¢ ê³§ ì¢…ë£Œ ì˜ˆì • (2-7ì¼, ${expiringSoon.length}ëª…)</strong><br>${expiringSoon.sort((a,b) => a.diffDays - b.diffDays).map(u => `@${u.id}(${u.diffDays}ì¼)`).join(' ')}</div>`;
Â  Â  }
Â  Â Â 
Â  Â  if (expired.length > 0) {
Â  Â  Â  Â  html += `<div class="urgent"><strong>âŒ ì´ë¯¸ ì¢…ë£Œë¨ (${expired.length}ëª…)</strong><br>${expired.map(u => `@${u.id}(${u.daysPassed}ì¼ì „)`).join(' ')}</div>`;
Â  Â  }
Â  Â Â 
Â  Â  if (expiresToday.length === 0 && expiresTomorrow.length === 0 && expiringSoon.length === 0) {
Â  Â  Â  Â  html += '<div class="green" style="padding: 15px; text-align: center; font-size: 16px;"><strong>âœ… ì˜¤ëŠ˜ ì•Œë¦¼í•  íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤!</strong></div>';
Â  Â  }
Â  Â Â 
Â  Â  document.getElementById('alertResult').innerHTML = html;
}

function generateKakaoMessages() {
Â  Â  const today = new Date();
    today.setHours(0,0,0,0);
Â  Â  const tomorrow = new Date(today);
Â  Â  tomorrow.setDate(tomorrow.getDate() + 1);
Â  Â Â 
Â  Â  const expiresToday = [], expiresTomorrow = [], expired = [];
Â  Â Â 
Â  Â  Object.keys(users).forEach(id => {
Â  Â  Â  Â  const endDate = new Date(users[id].end);
        endDate.setHours(0,0,0,0);
Â  Â  Â  Â  const diffDays = Math.ceil((endDate - today) / (1000*60*60*24));
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (diffDays === 0) expiresToday.push(id);
Â  Â  Â  Â  else if (diffDays === 1) expiresTomorrow.push(id);
Â  Â  Â  Â  else if (diffDays < 0) expired.push(id);
Â  Â  });
Â  Â Â 
Â  Â  let html = '<h5>ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ í…œí”Œë¦¿</h5>';
Â  Â Â 
Â  Â  const createMsgBox = (text, title) => `
Â  Â  Â  Â  <div style="margin: 15px 0;">
Â  Â  Â  Â  Â  Â  <h6 style="color: #2c3e50; margin-bottom: 8px;">${title}</h6>
Â  Â  Â  Â  Â  Â  <div class="message-box">
Â  Â  Â  Â  Â  Â  Â  Â  ${text}
Â  Â  Â  Â  Â  Â  Â  Â  <button class="copy-btn" onclick="copyText(\`${text.replace(/`/g, '\\`')}\`)">ğŸ“‹ ë³µì‚¬</button>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  `;
Â  Â Â 
Â  Â  if (expiresToday.length > 0) {
Â  Â  Â  Â  const msg = `${expiresToday.map(id => '@' + id).join(' ')}\n\nğŸ”´ ì˜¤ëŠ˜(${today.toLocaleDateString('ko-KR')}) ì´ìš©ê¸°ê°„ì´ ì¢…ë£Œë©ë‹ˆë‹¤.\nê²°ì œ í›„ ì¹´í†¡ ë©˜ì…˜ ì£¼ì„¸ìš”! ğŸ’³`;
Â  Â  Â  Â  html += createMsgBox(msg, 'ğŸ”´ ì˜¤ëŠ˜ ì¢…ë£Œ ë©”ì‹œì§€');
Â  Â  }
Â  Â Â 
Â  Â  if (expiresTomorrow.length > 0) {
Â  Â  Â  Â  const msg = `${expiresTomorrow.map(id => '@' + id).join(' ')}\n\nâš ï¸ ë‚´ì¼(${tomorrow.toLocaleDateString('ko-KR')}) ì´ìš©ê¸°ê°„ì´ ì¢…ë£Œë©ë‹ˆë‹¤.\në¯¸ë¦¬ ê²°ì œí•´ì£¼ì„¸ìš”! ğŸ’³`;
Â  Â  Â  Â  html += createMsgBox(msg, 'âš ï¸ ë‚´ì¼ ì¢…ë£Œ ë©”ì‹œì§€');
Â  Â  }
Â  Â Â 
Â  Â  if (expired.length > 0) {
Â  Â  Â  Â  const msg = `${expired.map(id => '@' + id).join(' ')}\n\nâŒ ì´ìš©ê¸°ê°„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\nê²°ì œ í›„ ì¹´í†¡ ë©˜ì…˜ ì£¼ì„¸ìš”! ğŸ’³`;
Â  Â  Â  Â  html += createMsgBox(msg, 'âŒ ì´ë¯¸ ì¢…ë£Œ ë©”ì‹œì§€');
Â  Â  }
Â  Â Â 
Â  Â  if (expiresToday.length === 0 && expiresTomorrow.length === 0 && expired.length === 0) {
Â  Â  Â  Â  html += '<div class="green" style="padding: 15px; text-align: center; font-size: 16px;"><strong>âœ… ì˜¤ëŠ˜ ë³´ë‚¼ ì¹´í†¡ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤!</strong></div>';
Â  Â  }
Â  Â Â 
Â  Â  document.getElementById('alertResult').innerHTML = html;
}

function copyText(text) {
Â  Â  if (navigator.clipboard && navigator.clipboard.writeText) {
Â  Â  Â  Â  navigator.clipboard.writeText(text).then(() => {
Â  Â  Â  Â  Â  Â  alert('ğŸ“‹ ë©”ì‹œì§€ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
Â  Â  Â  Â  }).catch(err => {
Â  Â  Â  Â  Â  Â  console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
Â  Â  Â  Â  Â  Â  fallbackCopyText(text);
Â  Â  Â  Â  });
Â  Â  } else {
Â  Â  Â  Â  fallbackCopyText(text);
Â  Â  }
}

function fallbackCopyText(text) {
Â  Â  const textArea = document.createElement('textarea');
Â  Â  textArea.value = text;
Â  Â  textArea.style.position = 'fixed';
Â  Â  textArea.style.left = '-999999px';
Â  Â  textArea.style.top = '-999999px';
Â  Â  document.body.appendChild(textArea);
Â  Â  textArea.focus();
Â  Â  textArea.select();
Â  Â Â 
Â  Â  try {
Â  Â  Â  Â  document.execCommand('copy');
Â  Â  Â  Â  alert('ğŸ“‹ ë©”ì‹œì§€ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
Â  Â  } catch (err) {
Â  Â  Â  Â  console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
Â  Â  Â  Â  alert('âŒ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ë³µì‚¬í•´ì£¼ì„¸ìš”.');
Â  Â  }
Â  Â Â 
Â  Â  document.body.removeChild(textArea);
}

function saveToTxt() {
Â  Â  try {
Â  Â  Â  Â  const keys = Object.keys(users).sort();
Â  Â  Â  Â  let text = "ì•„ì´ë””\tì‹œì‘ì¼\tì¢…ë£Œì¼\tìƒíƒœ\n";
Â  Â  Â  Â  text += "=====================================\n";
Â  Â  Â  Â Â 
Â  Â  Â  Â  keys.forEach(function(id) {
Â  Â  Â  Â  Â  Â  const status = getDateStatus(users[id].end);
Â  Â  Â  Â  Â  Â  text += `${id}\t${users[id].start}\t${users[id].end}\t${status.text}\n`;
Â  Â  Â  Â  });
Â  Â  Â  Â Â 
Â  Â  Â  Â  text += `\nì´ íšŒì› ìˆ˜: ${keys.length}ëª…\n`;
Â  Â  Â  Â  text += `ìƒì„±ì¼: ${new Date().toLocaleString('ko-KR')}\n`;
Â  Â  Â  Â Â 
Â  Â  Â  Â  const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
Â  Â  Â  Â  const url = URL.createObjectURL(blob);
Â  Â  Â  Â  const a = document.createElement("a");
Â  Â  Â  Â  a.href = url;
Â  Â  Â  Â  a.download = `ì±„ì›€ìŠ¤ëŒ“ê³µ_íšŒì›ëª©ë¡_${new Date().toISOString().slice(0,10)}.txt`;
Â  Â  Â  Â  document.body.appendChild(a);
Â  Â  Â  Â  a.click();
Â  Â  Â  Â  document.body.removeChild(a);
Â  Â  Â  Â  URL.revokeObjectURL(url);
Â  Â  Â  Â Â 
Â  Â  Â  Â  alert('ğŸ“„ TXT íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
Â  Â  } catch (error) {
Â  Â  Â  Â  console.error('TXT ì €ì¥ ì‹¤íŒ¨:', error);
Â  Â  Â  Â  alert('âŒ íŒŒì¼ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
Â  Â  }
}

function backupData() {
Â  Â  try {
Â  Â  Â  Â  const backupData = {
Â  Â  Â  Â  Â  Â  users: users,
Â  Â  Â  Â  Â  Â  timestamp: new Date().toISOString(),
Â  Â  Â  Â  Â  Â  version: "2.0",
Â  Â  Â  Â  Â  Â  totalUsers: Object.keys(users).length
Â  Â  Â  Â  };
Â  Â  Â  Â Â 
Â  Â  Â  Â  const dataStr = JSON.stringify(backupData, null, 2);
Â  Â  Â  Â  const blob = new Blob([dataStr], { type: "application/json;charset=utf-8" });
Â  Â  Â  Â  const url = URL.createObjectURL(blob);
Â  Â  Â  Â  const a = document.createElement("a");
Â  Â  Â  Â  a.href = url;
Â  Â  Â  Â  a.download = `ì±„ì›€ìŠ¤ëŒ“ê³µ_ë°±ì—…_${new Date().toISOString().slice(0,19).replace(/:/g, '-')}.json`;
Â  Â  Â  Â  document.body.appendChild(a);
Â  Â  Â  Â  a.click();
Â  Â  Â  Â  document.body.removeChild(a);
Â  Â  Â  Â  URL.revokeObjectURL(url);
Â  Â  Â  Â Â 
Â  Â  Â  Â  alert('ğŸ’¾ ë°±ì—… íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
Â  Â  } catch (error) {
Â  Â  Â  Â  console.error('ë°±ì—… ì‹¤íŒ¨:', error);
Â  Â  Â  Â  alert('âŒ ë°±ì—…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
Â  Â  }
}

function restoreData(input) {
Â  Â  const file = input.files[0];
Â  Â  if (!file) return;
Â  Â Â 
Â  Â  const reader = new FileReader();
Â  Â  reader.onload = function(e) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const data = JSON.parse(e.target.result);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // ë°±ì—… íŒŒì¼ í˜•ì‹ í™•ì¸
Â  Â  Â  Â  Â  Â  let userData;
Â  Â  Â  Â  Â  Â  if (data.users && data.version) {
Â  Â  Â  Â  Â  Â  Â  Â  // ìƒˆë¡œìš´ ë°±ì—… í˜•ì‹
Â  Â  Â  Â  Â  Â  Â  Â  userData = data.users;
Â  Â  Â  Â  Â  Â  } else if (typeof data === 'object' && !Array.isArray(data)) {
Â  Â  Â  Â  Â  Â  Â  Â  // ì´ì „ í˜•ì‹ ë˜ëŠ” ì§ì ‘ ì‚¬ìš©ì ë°ì´í„°
Â  Â  Â  Â  Â  Â  Â  Â  userData = data;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  throw new Error('ì§€ì›í•˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤.');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬
Â  Â  Â  Â  Â  Â  if (!userData || typeof userData !== 'object') {
Â  Â  Â  Â  Â  Â  Â  Â  throw new Error('ì˜ëª»ëœ ë°ì´í„° í˜•ì‹ì…ë‹ˆë‹¤.');
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  // ì‚¬ìš©ì ë°ì´í„° ê²€ì¦
Â  Â  Â  Â  Â  Â  for (const [id, user] of Object.entries(userData)) {
Â  Â  Â  Â  Â  Â  Â  Â  if (!user.start || !user.end || typeof user.start !== 'string' || typeof user.end !== 'string') {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  throw new Error(`ì‚¬ìš©ì "${id}"ì˜ ë°ì´í„°ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.`);
Â  Â  Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  users = userData;
Â  Â  Â  Â  Â  Â  hasUnsavedChanges = true;
Â  Â  Â  Â  Â  Â  const saved = saveUsersToMemory();
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  if (saved) {
Â  Â  Â  Â  Â  Â  Â  Â  loadTable();
Â  Â  Â  Â  Â  Â  Â  Â  alert(`âœ… ë°ì´í„°ê°€ ì„±ê³µì ìœ¼ë¡œ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤!\në³µì›ëœ íšŒì› ìˆ˜: ${Object.keys(users).length}ëª…`);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  console.error('ë³µì› ì‹¤íŒ¨:', error);
Â  Â  Â  Â  Â  Â  alert('âŒ ë³µì›ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + error.message);
Â  Â  Â  Â  }
Â  Â  };
Â  Â Â 
Â  Â  reader.onerror = function() {
Â  Â  Â  Â  alert('âŒ íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
Â  Â  };
Â  Â Â 
Â  Â  reader.readAsText(file);
Â  Â  input.value = '';
}

function resetToDefault() {
Â  Â  if (confirm('âš ï¸ ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°ê°’ìœ¼ë¡œ ë³µì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\ní˜„ì¬ ë°ì´í„°ëŠ” ëª¨ë‘ ì‚­ì œë˜ë©° ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
Â  Â  Â  Â  users = JSON.parse(JSON.stringify(defaultUsers));
Â  Â  Â  Â  hasUnsavedChanges = true;
Â  Â  Â  Â  const saved = saveUsersToMemory();
Â  Â  Â  Â Â 
Â  Â  Â  Â  if (saved) {
Â  Â  Â  Â  Â  Â  loadTable();
Â  Â  Â  Â  Â  Â  alert('ğŸ”„ ì´ˆê¸° ë°ì´í„°ë¡œ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤.');
Â  Â  Â  Â  }
Â  Â  }
}

function manualSave() {
Â  Â  const saved = saveUsersToMemory();
Â  Â  if (saved) {
Â  Â  Â  Â  alert(`âœ… ëª¨ë“  ë³€ê²½ì‚¬í•­ì´ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!\n\ní˜„ì¬ íšŒì› ìˆ˜: ${Object.keys(users).length}ëª…\nì €ì¥ ì‹œê°„: ${new Date().toLocaleString('ko-KR')}\n\nâš ï¸ ì£¼ì˜: ë¸Œë¼ìš°ì €ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ê±°ë‚˜ ë‹«ìœ¼ë©´ ë°ì´í„°ê°€ ì‚¬ë¼ì§‘ë‹ˆë‹¤.\nì¤‘ìš”í•œ ë°ì´í„°ëŠ” ë°±ì—… ê¸°ëŠ¥ì„ ì‚¬ìš©í•´ì£¼ì„¸ìš”!`);
Â  Â  } else {
Â  Â  Â  Â  alert('âŒ ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
Â  Â  }
}

// ë””ë²„ê¹…ì„ ìœ„í•œ í•¨ìˆ˜ë“¤
function checkStorageStatus() {
Â  Â  console.log('=== ë©”ëª¨ë¦¬ ì €ì¥ì†Œ ìƒíƒœ í™•ì¸ ===');
Â  Â  console.log('í˜„ì¬ ë©”ëª¨ë¦¬ì˜ ì‚¬ìš©ì ìˆ˜:', Object.keys(users).length);
Â  Â  console.log('ì €ì¥ë˜ì§€ ì•Šì€ ë³€ê²½ì‚¬í•­:', hasUnsavedChanges);
Â  Â  console.log('ë¡œê·¸ì¸ ìƒíƒœ:', isLoggedIn);
Â  Â  console.log('ì‚¬ìš©ì ëª©ë¡:', Object.keys(users));
Â  Â  console.log('===============================');
}

// ê°œë°œì ë„êµ¬ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ ì „ì—­ìœ¼ë¡œ ë…¸ì¶œ
window.debugStorage = checkStorageStatus;

console.log('ì±„ì›€ ìŠ¤ëŒ“ê³µ ê³ ê°ì¡°íšŒê¸° v2.1 ë¡œë“œ ì™„ë£Œ (ë©”ëª¨ë¦¬ ê¸°ë°˜)');
console.log('âš ï¸ ì£¼ì˜: ì´ ë²„ì „ì€ ë©”ëª¨ë¦¬ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•˜ë©°, í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ë°ì´í„°ê°€ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.');
console.log('ì¤‘ìš”í•œ ë°ì´í„°ëŠ” ë°±ì—… ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ì—¬ íŒŒì¼ë¡œ ì €ì¥í•´ì£¼ì„¸ìš”.');
console.log('ë””ë²„ê¹…: window.debugStorage() í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ëª¨ë¦¬ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
</script>
</body>
</html>
