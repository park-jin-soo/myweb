<!DOCTYPE html>
<html lang="ko">
<head>
Â  <meta charset="UTF-8" />
Â  <meta name="viewport" content="width=device-width, initial-scale=1" />
Â  <title>ì±„ì›€ ìŠ¤ëŒ“ê³µ ê³ ê°ì¡°íšŒê¸°</title>
Â  <style>
Â  Â  body {Â 
Â  Â  Â  font-family: 'Noto Sans KR', sans-serif;Â 
Â  Â  Â  max-width: 900px;Â 
Â  Â  Â  margin: auto;Â 
Â  Â  Â  padding: 20px;Â 
Â  Â  Â  background: #f4f6f8;Â 
Â  Â  }
Â  Â  h1 { text-align: center; color: #2b4e84; }
Â  Â  .box, .admin-box {Â 
Â  Â  Â  background: #fff;Â 
Â  Â  Â  padding: 20px;Â 
Â  Â  Â  margin-top: 20px;Â 
Â  Â  Â  border-radius: 10px;Â 
Â  Â  Â  box-shadow: 0 0 8px rgba(0,0,0,0.05);Â 
Â  Â  }
Â  Â  input, button {Â 
Â  Â  Â  padding: 10px;Â 
Â  Â  Â  margin: 5px 0;Â 
Â  Â  Â  width: 100%;Â 
Â  Â  Â  box-sizing: border-box;Â 
Â  Â  }
Â  Â  button {Â 
Â  Â  Â  background-color: #2b4e84;Â 
Â  Â  Â  color: white;Â 
Â  Â  Â  font-weight: bold;Â 
Â  Â  Â  border: none;Â 
Â  Â  Â  cursor: pointer;Â 
Â  Â  }
Â  Â  .result { margin-top: 15px; font-size: 16px; }
Â  Â  .red { color: red; }
Â  Â  .blue { color: blue; }
Â  Â  .green { color: green; }
Â  Â  .admin-only { display: none; }
Â  Â  .row { display: flex; gap: 10px; flex-wrap: wrap; }
Â  Â  .row > div { flex: 1; min-width: 150px; }
Â  Â  table { width: 100%; margin-top: 10px; border-collapse: collapse; }
Â  Â  th, td { padding: 8px; border: 1px solid #ccc; text-align: center; }
Â  Â  .footer { text-align: center; margin-top: 30px; font-size: 18px; font-weight: bold; }
Â  Â  .alert-section {Â 
Â  Â  Â  background: #fff3cd;Â 
Â  Â  Â  border: 2px solid #ffc107;Â 
Â  Â  Â  border-radius: 8px;Â 
Â  Â  Â  padding: 15px;Â 
Â  Â  Â  margin-bottom: 20px;Â 
Â  Â  }
Â  Â  .alert-buttons { display: flex; gap: 10px; margin: 10px 0; }
Â  Â  .alert-buttons button { flex: 1; background-color: #dc3545; }
Â  Â  .alert-buttons button:hover { background-color: #c82333; }
Â  Â  .alert-result {Â 
Â  Â  Â  margin-top: 15px;Â 
Â  Â  Â  padding: 10px;Â 
Â  Â  Â  background: white;Â 
Â  Â  Â  border-radius: 5px;Â 
Â  Â  Â  border: 1px solid #ddd;
Â  Â  Â  max-height: 300px;
Â  Â  Â  overflow-y: auto;
Â  Â  }
Â  Â  .urgent { background-color: #f8d7da; color: #721c24; padding: 5px; border-radius: 3px; }
Â  Â  .warning { background-color: #fff3cd; color: #856404; padding: 5px; border-radius: 3px; }
Â  Â  .copy-btn {Â 
Â  Â  Â  background: #28a745;Â 
Â  Â  Â  color: white;Â 
Â  Â  Â  border: none;Â 
Â  Â  Â  padding: 5px 10px;Â 
Â  Â  Â  border-radius: 3px;Â 
Â  Â  Â  cursor: pointer;Â 
Â  Â  Â  font-size: 12px;
Â  Â  Â  margin-left: 10px;
Â  Â  }
Â  Â  .copy-btn:hover { background: #218838; }
Â  Â  .message-box {Â 
Â  Â  Â  background: #f8f9fa;Â 
Â  Â  Â  border: 1px solid #dee2e6;Â 
Â  Â  Â  padding: 10px;Â 
Â  Â  Â  margin: 10px 0;Â 
Â  Â  Â  border-radius: 5px;Â 
Â  Â  Â  font-family: monospace;
Â  Â  Â  white-space: pre-wrap;
Â  Â  }
Â  Â  .backup-section { margin-top: 20px; padding-top: 20px; border-top: 2px solid #eee; }
Â  Â  .backup-buttons { display: flex; gap: 10px; margin-top: 10px; }
Â  Â  .backup-buttons button { flex: 1; }
Â  Â  .status-msg { margin-top: 10px; padding: 10px; border-radius: 5px; }
Â  Â  .success { background-color: #d4edda; color: #155724; }
Â  </style>
</head>
<body>
<h1>ì±„ì›€ ìŠ¤ëŒ“ê³µ ê³ ê° ì¢…ë£Œì¼ ì¡°íšŒ</h1>

<div class="footer">ğŸ’³ í† ìŠ¤ë±…í¬ 1001 - 3085 - 3057 ë°•ì§„ìˆ˜ (20,000ì›)</div>

<div class="box">
Â  <h3>ğŸ‘¤ ê³ ê° ì „ìš© ì¡°íšŒ</h3>
Â  <input type="text" id="userSearch" placeholder="ì•„ì´ë”” ì…ë ¥">
Â  <button onclick="searchUser()">ì¡°íšŒí•˜ê¸°</button>
Â  <div id="searchResult" class="result"></div>
</div>

<div class="box">
Â  <h3>ğŸ” ê´€ë¦¬ì ë¡œê·¸ì¸</h3>
Â  <input type="password" id="adminPass" placeholder="ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ ì…ë ¥">
Â  <button onclick="loginAdmin()">ë¡œê·¸ì¸</button>
</div>

<div id="adminPanel" class="admin-only admin-box">
Â  <h3>ğŸ“‹ ê´€ë¦¬ì ì „ìš©</h3>
Â Â 
Â  <div class="alert-section">
Â  Â  <h4>ğŸš¨ ì¢…ë£Œ ì„ë°• ì•Œë¦¼</h4>
Â  Â  <div class="alert-buttons">
Â  Â  Â  <button onclick="checkExpiringUsers()">ğŸ“… ì˜¤ëŠ˜ í™•ì¸</button>
Â  Â  Â  <button onclick="generateKakaoMessages()">ğŸ’¬ ì¹´í†¡ ë©”ì‹œì§€ ìƒì„±</button>
Â  Â  </div>
Â  Â  <div id="alertResult" class="alert-result"></div>
Â  </div>
Â Â 
Â  <div class="row">
Â  Â  <div><input type="text" id="newId" placeholder="ì•„ì´ë”” ì…ë ¥"></div>
Â  Â  <div><input type="date" id="startDate"></div>
Â  Â  <div><input type="date" id="endDate"></div>
Â  </div>
Â  <button onclick="addUser()">â• ì•„ì´ë”” ì¶”ê°€/ìˆ˜ì •</button>
Â  <button onclick="saveToTxt()">ğŸ’¾ TXTë¡œ ì €ì¥</button>
Â  <div id="memberCount" class="result"></div>
Â  <div id="statusMessage"></div>
Â Â 
Â  <div class="backup-section">
Â  Â  <h4>ğŸ”„ ë°ì´í„° ë°±ì—…/ë³µì›</h4>
Â  Â  <div class="backup-buttons">
Â  Â  Â  <button onclick="backupData()">ğŸ“¤ ë°ì´í„° ë°±ì—…</button>
Â  Â  Â  <button onclick="document.getElementById('fileInput').click()">ğŸ“¥ ë°ì´í„° ë³µì›</button>
Â  Â  Â  <button onclick="resetToDefault()">ğŸ”„ ì´ˆê¸° ë°ì´í„°ë¡œ ë³µì›</button>
Â  Â  </div>
Â  Â  <input type="file" id="fileInput" accept=".json" style="display: none;" onchange="restoreData(this)">
Â  Â  <div class="status-msg" style="font-size: 12px; color: #666;">
Â  Â  Â  ğŸ’¡ íŒ: ì •ê¸°ì ìœ¼ë¡œ ë°ì´í„°ë¥¼ ë°±ì—…í•˜ì„¸ìš”. ë¸Œë¼ìš°ì € ë°ì´í„°ê°€ ì‚­ì œë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
Â  Â  </div>
Â  </div>
Â Â 
Â  <table id="userTable">
Â  Â  <thead><tr><th>ì•„ì´ë””</th><th>ì‹œì‘ì¼</th><th>ì¢…ë£Œì¼</th><th>ìƒíƒœ</th><th>ìˆ˜ì •/ì‚­ì œ</th></tr></thead>
Â  Â  <tbody></tbody>
Â  </table>
</div>

<script>
// ì „ì—­ ë³€ìˆ˜
const ADMIN_PASSWORD = "7702";
const defaultUsers = {
  "aa--dd": {"start": "2025-05-15", "end": "2025-06-15"},
  "epic_study": {"start": "2025-05-31", "end": "2025-06-30"},
  "hellenjj": {"start": "2025-06-08", "end": "2025-07-08"},
  "hge319": {"start": "2025-06-01", "end": "2025-07-01"},
  "kim1160gagle": {"start": "2025-05-23", "end": "2025-06-23"},
  "mark1536": {"start": "2025-06-01", "end": "2025-07-01"},
  "meena1225": {"start": "2025-06-01", "end": "2025-07-01"},
  "meena77": {"start": "2025-06-01", "end": "2025-07-01"},
  "na_english": {"start": "2025-05-27", "end": "2025-06-27"},
  "somsatag1225": {"start": "2025-06-01", "end": "2025-07-01"},
  "thebrightedu": {"start": "2025-06-08", "end": "2025-07-08"},
  "ussua": {"start": "2025-05-20", "end": "2025-06-20"},
  "whiteyun8058": {"start": "2025-05-18", "end": "2025-06-18"},
  "whiteyun901": {"start": "2025-05-18", "end": "2025-06-18"},
  "ymmath00": {"start": "2025-05-28", "end": "2025-06-28"}
};

let users = {};

// [ìˆ˜ì •ë¨] í˜ì´ì§€ ë¡œë“œ ì‹œ LocalStorageì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” í•¨ìˆ˜
document.addEventListener('DOMContentLoaded', function() {
    loadUsersFromLocalStorage();
});

function loadUsersFromLocalStorage() {
    const savedUsers = localStorage.getItem('chaeumUsers');
    if (savedUsers) {
        users = JSON.parse(savedUsers);
    } else {
        users = JSON.parse(JSON.stringify(defaultUsers)); // ì´ˆê¸° ë°ì´í„° ì‚¬ìš©
    }
}

// [ì¶”ê°€ë¨] ë°ì´í„°ë¥¼ LocalStorageì— ì €ì¥í•˜ëŠ” í•¨ìˆ˜
function saveUsersToLocalStorage() {
    localStorage.setItem('chaeumUsers', JSON.stringify(users));
}


// ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
function getDateStatus(endDate) {
Â  const today = new Date();
Â  const end = new Date(endDate);
Â  const diff = Math.ceil((end - today) / (1000*60*60*24));
Â Â 
Â  if (diff > 7) return { text: 'ì§„í–‰ì¤‘', class: 'green' };
Â  if (diff > 0) return { text: diff + 'ì¼ ë‚¨ìŒ', class: 'red' };
Â  return { text: 'ì¢…ë£Œë¨', class: 'red' };
}

// ì‚¬ìš©ì ì¡°íšŒ í•¨ìˆ˜
function searchUser() {
Â  const id = document.getElementById("userSearch").value.trim();
Â  const box = document.getElementById("searchResult");
Â Â 
Â  if (!id) {
Â  Â  box.innerHTML = '<span class="red">ì•„ì´ë””ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.</span>';
Â  Â  return;
Â  }
Â Â 
Â  const user = users[id];
Â  if (!user) {
Â  Â  box.innerHTML = '<span class="red">ë“±ë¡ë˜ì§€ ì•Šì€ ì•„ì´ë””ì…ë‹ˆë‹¤.</span>';
Â  Â  return;
Â  }
Â Â 
Â  const today = new Date();
Â  const end = new Date(user.end);
Â  const diff = Math.ceil((end - today) / (1000*60*60*24));
Â  const status = getDateStatus(user.end);
Â Â 
Â  let msg = 'âœ… <b class="blue">ì•„ì´ë””:</b> ' + id + '<br>';
Â  msg += 'ğŸ“… <b>ì‹œì‘ì¼:</b> ' + user.start + '<br>';
Â  msg += 'ğŸ“… <b>ì¢…ë£Œì¼:</b> ' + user.end + '<br>';
Â  msg += 'ğŸ“Š <b>ìƒíƒœ:</b> <span class="' + status.class + '">' + status.text + '</span><br>';
Â Â 
Â  if (diff > 0) {
Â  Â  msg += '<span class="red">â³ ì¢…ë£Œì¼ê¹Œì§€ ' + diff + 'ì¼ ë‚¨ì•˜ìŠµë‹ˆë‹¤.</span>';
Â  } else {
Â  Â  msg += '<span class="red">ğŸ”’ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ì…ê¸ˆ í›„ ì¹´í†¡ ë§¨ì…˜ ì£¼ì„¸ìš”.</span>';
Â  }
Â Â 
Â  box.innerHTML = msg;
}

// ê´€ë¦¬ì ë¡œê·¸ì¸
function loginAdmin() {
Â  const pw = document.getElementById("adminPass").value.trim();
Â  if (pw === ADMIN_PASSWORD) {
Â  Â  document.getElementById("adminPanel").style.display = "block";
Â  Â  loadTable();
Â  Â  alert("ê´€ë¦¬ì ë¡œê·¸ì¸ ì„±ê³µ!");
Â  } else {
Â  Â  alert("ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
Â  }
}

// í…Œì´ë¸” ë¡œë“œ
function loadTable() {
Â  const body = document.querySelector("#userTable tbody");
Â  body.innerHTML = "";
Â  const keys = Object.keys(users).sort();
Â  document.getElementById("memberCount").innerText = "ì´ íšŒì› ìˆ˜ : " + keys.length + " ëª…";
Â Â 
Â  keys.forEach(function(id) {
Â  Â  const status = getDateStatus(users[id].end);
Â  Â  const row = '<tr>' +
Â  Â  Â  '<td>' + id + '</td>' +
Â  Â  Â  '<td>' + users[id].start + '</td>' +
Â  Â  Â  '<td>' + users[id].end + '</td>' +
Â  Â  Â  '<td><span class="' + status.class + '">' + status.text + '</span></td>' +
Â  Â  Â  '<td>' +
Â  Â  Â  Â  '<button onclick="editUser(\'' + id + '\')">ìˆ˜ì •</button>' +
Â  Â  Â  Â  '<button onclick="deleteUser(\'' + id + '\')">ì‚­ì œ</button>' +
Â  Â  Â  '</td>' +
Â  Â  '</tr>';
Â  Â  body.innerHTML += row;
Â  });
}

// ì‚¬ìš©ì ì¶”ê°€/ìˆ˜ì •
function addUser() {
Â  const id = document.getElementById("newId").value.trim();
Â  const start = document.getElementById("startDate").value;
Â  const end = document.getElementById("endDate").value;
Â Â 
Â  if (!id || !start || !end) {
Â  Â  alert("ëª¨ë“  í•­ëª©ì„ ì…ë ¥í•˜ì„¸ìš”.");
Â  Â  return;
Â  }
Â Â 
Â  const isEdit = users[id] ? true : false;
Â  users[id] = { start: start, end: end };
Â  
Â  saveUsersToLocalStorage(); // [ìˆ˜ì •ë¨] ë³€ê²½ì‚¬í•­ ì €ì¥
Â  loadTable();

Â  document.getElementById("newId").value = "";
Â  document.getElementById("startDate").value = "";
Â  document.getElementById("endDate").value = "";
Â Â 
Â  const message = isEdit ? (id + " ì •ë³´ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.") : (id + "ê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.");
Â  alert(message);
}

// ì‚¬ìš©ì ìˆ˜ì •
function editUser(id) {
Â  document.getElementById("newId").value = id;
Â  document.getElementById("startDate").value = users[id].start;
Â  document.getElementById("endDate").value = users[id].end;
Â  document.getElementById("newId").scrollIntoView({ behavior: 'smooth' });
Â  document.getElementById("newId").focus();
}

// ì‚¬ìš©ì ì‚­ì œ
function deleteUser(id) {
Â  if (confirm(id + "ì„(ë¥¼) ì‚­ì œí• ê¹Œìš”?")) {
Â  Â  delete users[id];
    saveUsersToLocalStorage(); // [ìˆ˜ì •ë¨] ë³€ê²½ì‚¬í•­ ì €ì¥
Â  Â  loadTable();
Â  Â  alert(id + "ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.");
Â  }
}

// ì¢…ë£Œ ì„ë°• í™•ì¸ ë° ì¹´í†¡ ë©”ì‹œì§€ ìƒì„± (ê¸°ì¡´ê³¼ ë™ì¼)
function checkExpiringUsers() {
Â  const today = new Date();
Â  const tomorrow = new Date(today);
Â  tomorrow.setDate(tomorrow.getDate() + 1);
Â Â 
Â  const expiresToday = [], expiresTomorrow = [], expired = [], expiringSoon = [];
Â Â 
Â  Object.keys(users).forEach(id => {
Â  Â  const endDate = new Date(users[id].end);
Â  Â  const diffDays = Math.ceil((endDate - today) / (1000*60*60*24));
Â  Â Â 
Â  Â  if (diffDays === 0) expiresToday.push({id, ...users[id], diffDays});
Â  Â  else if (diffDays === 1) expiresTomorrow.push({id, ...users[id], diffDays});
Â  Â  else if (diffDays < 0) expired.push({id, ...users[id], diffDays: Math.abs(diffDays)});
Â  Â  else if (diffDays <= 7) expiringSoon.push({id, ...users[id], diffDays});
Â  });
Â Â 
Â  let html = `<h5>ğŸ“… ${today.toLocaleDateString('ko-KR')} ì•Œë¦¼ í˜„í™©</h5>`;
Â  if (expiresToday.length > 0) html += `<div class="urgent"><strong>ğŸ”´ ì˜¤ëŠ˜ ì¢…ë£Œ (${expiresToday.length}ëª…)</strong><br>${expiresToday.map(u => '@'+u.id).join(' ')}</div><br>`;
Â  if (expiresTomorrow.length > 0) html += `<div class="urgent"><strong>âš ï¸ ë‚´ì¼ ì¢…ë£Œ (${expiresTomorrow.length}ëª…)</strong><br>${expiresTomorrow.map(u => '@'+u.id).join(' ')}</div><br>`;
Â  if (expiringSoon.length > 0) html += `<div class="warning"><strong>ğŸ“¢ ê³§ ì¢…ë£Œ ì˜ˆì • (2-7ì¼, ${expiringSoon.length}ëª…)</strong><br>${expiringSoon.map(u => `@${u.id}(${u.diffDays}ì¼)`).join(' ')}</div><br>`;
Â  if (expired.length > 0) html += `<div class="urgent"><strong>âŒ ì´ë¯¸ ì¢…ë£Œë¨ (${expired.length}ëª…)</strong><br>${expired.map(u => `@${u.id}(${u.diffDays}ì¼ì „)`).join(' ')}</div><br>`;
Â  if (!html.includes('div')) html += '<div class="green">âœ… ì˜¤ëŠ˜ ì•Œë¦¼í•  íšŒì›ì´ ì—†ìŠµë‹ˆë‹¤!</div>';
Â Â 
Â  document.getElementById('alertResult').innerHTML = html;
}

function generateKakaoMessages() {
Â  const today = new Date();
Â  const tomorrow = new Date(today);
Â  tomorrow.setDate(tomorrow.getDate() + 1);
Â Â 
Â  const expiresToday = [], expiresTomorrow = [], expired = [];
Â  Object.keys(users).forEach(id => {
Â  Â  const endDate = new Date(users[id].end);
Â  Â  const diffDays = Math.ceil((endDate - today) / (1000*60*60*24));
Â  Â  if (diffDays === 0) expiresToday.push(id);
Â  Â  else if (diffDays === 1) expiresTomorrow.push(id);
Â  Â  else if (diffDays < 0) expired.push(id);
Â  });
Â Â 
Â  let html = '<h5>ğŸ’¬ ì¹´ì¹´ì˜¤í†¡ ë©”ì‹œì§€ (ë³µì‚¬í•´ì„œ ì‚¬ìš©í•˜ì„¸ìš”)</h5>';
Â  const createMsgBox = (mentions, text) => `<div class="message-box">${text}<button class="copy-btn" onclick="copyText('${text.replace(/'/g, "\\'").replace(/\n/g, "\\n")}')">ë³µì‚¬</button></div>`;
Â Â 
Â  if (expiresToday.length > 0) html += createMsgBox(expiresToday.map(id => '@' + id).join(' '), `${expiresToday.map(id => '@' + id).join(' ')}\n\nğŸ”´ ì˜¤ëŠ˜(${today.toLocaleDateString('ko-KR')}) ì´ìš©ê¸°ê°„ì´ ì¢…ë£Œë©ë‹ˆë‹¤.\nê²°ì œ í›„ ì¹´í†¡ ë©˜ì…˜ ì£¼ì„¸ìš”! ğŸ’³`);
Â  if (expiresTomorrow.length > 0) html += createMsgBox(expiresTomorrow.map(id => '@' + id).join(' '), `${expiresTomorrow.map(id => '@' + id).join(' ')}\n\nâš ï¸ ë‚´ì¼(${tomorrow.toLocaleDateString('ko-KR')}) ì´ìš©ê¸°ê°„ì´ ì¢…ë£Œë©ë‹ˆë‹¤.\në¯¸ë¦¬ ê²°ì œí•´ì£¼ì„¸ìš”! ğŸ’³`);
Â  if (expired.length > 0) html += createMsgBox(expired.map(id => '@' + id).join(' '), `${expired.map(id => '@' + id).join(' ')}\n\nâŒ ì´ìš©ê¸°ê°„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.\nê²°ì œ í›„ ì¹´í†¡ ë©˜ì…˜ ì£¼ì„¸ìš”! ğŸ’³`);
Â  if (!html.includes('div')) html += '<div class="green">âœ… ì˜¤ëŠ˜ ë³´ë‚¼ ì¹´í†¡ ë©”ì‹œì§€ê°€ ì—†ìŠµë‹ˆë‹¤!</div>';
Â Â 
Â  document.getElementById('alertResult').innerHTML = html;
}

function copyText(text) {
Â  navigator.clipboard.writeText(text).then(() => alert('ë©”ì‹œì§€ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!'));
}

// TXT ì €ì¥
function saveToTxt() {
Â  const keys = Object.keys(users).sort();
Â  let text = "ì•„ì´ë””\tì‹œì‘ì¼\tì¢…ë£Œì¼\tìƒíƒœ\n";
Â  keys.forEach(function(id) {
Â  Â  const status = getDateStatus(users[id].end);
Â  Â  text += id + '\t' + users[id].start + '\t' + users[id].end + '\t' + status.text + '\n';
Â  });
Â Â 
Â  const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
Â  const url = URL.createObjectURL(blob);
Â  const a = document.createElement("a");
Â  const today = new Date().toISOString().slice(0,10);
Â  a.href = url;
Â  a.download = 'íšŒì›ëª©ë¡_' + today + '.txt';
Â  a.click();
Â  URL.revokeObjectURL(url);
Â  alert('TXT íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
}

// ë°±ì—…/ë³µì› í•¨ìˆ˜
function backupData() {
Â  const dataStr = JSON.stringify(users, null, 2);
Â  const blob = new Blob([dataStr], { type: "application/json" });
Â  const url = URL.createObjectURL(blob);
Â  const a = document.createElement("a");
Â  a.href = url;
Â  a.download = `chaeum_backup_${new Date().toISOString().slice(0,10)}.json`;
Â  a.click();
Â  URL.revokeObjectURL(url);
Â  alert('ë°±ì—… íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤. ì´ íŒŒì¼ì€ ë‹¤ë¥¸ ì»´í“¨í„°ì—ì„œ ë³µì›í•  ë•Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
}

function restoreData(input) {
Â  const file = input.files[0];
Â  if (!file) return;
Â Â 
Â  const reader = new FileReader();
Â  reader.onload = function(e) {
Â  Â  try {
Â  Â  Â  const data = JSON.parse(e.target.result);
Â  Â  Â  users = data;
      saveUsersToLocalStorage(); // [ìˆ˜ì •ë¨] ë³µì›ëœ ë°ì´í„°ë¥¼ ì¦‰ì‹œ ì €ì¥
Â  Â  Â  loadTable();
Â  Â  Â  alert('ë°ì´í„°ê°€ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤.');
Â  Â  } catch (error) {
Â  Â  Â  alert('ì˜ëª»ëœ ë°±ì—… íŒŒì¼ì…ë‹ˆë‹¤.');
Â  Â  }
Â  };
Â  reader.readAsText(file);
Â  input.value = '';
}

function resetToDefault() {
Â  if (confirm('ëª¨ë“  ë°ì´í„°ë¥¼ ì´ˆê¸°ê°’ìœ¼ë¡œ ë³µì›í•˜ì‹œê² ìŠµë‹ˆê¹Œ? í˜„ì¬ ë°ì´í„°ëŠ” ëª¨ë‘ ì‚­ì œë©ë‹ˆë‹¤.')) {
Â  Â  users = JSON.parse(JSON.stringify(defaultUsers));
    saveUsersToLocalStorage(); // [ìˆ˜ì •ë¨] ì´ˆê¸°í™” í›„ ì¦‰ì‹œ ì €ì¥
Â  Â  loadTable();
Â  Â  alert('ì´ˆê¸° ë°ì´í„°ë¡œ ë³µì›ë˜ì—ˆìŠµë‹ˆë‹¤.');
Â  }
}
</script>
</body>
</html>
